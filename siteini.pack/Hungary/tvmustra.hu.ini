**------------------------------------------------------------------------------------------------
* @header_start
* WebGrab+Plus ini for grabbing EPG data from TvGuide websites
* @Site: tvmustra.hu
* @MinSWversion: V2.1
* @Revision 3 - [24/08/2022] doglover
* @Revision 2 - [30/12/2021] doglover
*   added removal of duplicates
* @Revision 1 - [07/05/2019] doglover
*   rewrite
* @Revision 0 - [04/2013] doglover
*   - creation
* @Remarks:
* @header_end
**------------------------------------------------------------------------------------------------
site {url=tvmustra.hu|timezone=Europe/Budapest|maxdays=7|cultureinfo=HU-hu|charset=utf-8|titlematchfactor=50}
url_index{url()|https://www.tvmustra.hu/tvmusor/|channel|/|urldate|}
urldate.format {datestring|yyyy-MM-dd}
global_temp_1.modify {set|'config_site_id'}

scope.range {(splitindex)|end}
index_showsplit.scrub {multi ()|<div class="col-6_sor3">|data-channel="||<div class="col-12_}
index_temp_2.modify {substring(type=regex)|'index_showsplit' data-show="(\d*?)" } 
index_temp_2.modify {cleanup(removeduplicates span=4 link="index_showsplit")}
end_scope
*index_showsplit.modify { (debug)}
*index_showsplit.modify {cleanup(debug removeduplicates)}
index_start.scrub {single()|<div class="musor_lista_idopont|">|</}
index_title.scrub {single()|<div class="musor_lista_cim|">|</}
index_temp_1.scrub {single|data-show="||"|"}
index_temp_1.modify {replace|-|&showId=}
index_urlshow.modify {addstart|https://www.tvmustra.hu/php/ajaxgw/showdata.php?channel='global_temp_1'&showId='index_temp_1'}

title.modify {addstart|'index_title'}
description.scrub {multi ()|<div class="expanded_infoblokk|>|</div>|}
subtitle.scrub {single ()|<div class="expanded_infoblokk_1|>(|)|</div>|}
temp_1.scrub {single|<div class="expanded_infoblokk_1|>(|)|</div>|}
description.modify {remove |'temp_1'}
description.modify {remove |()}
description.modify {cleanup(tags="<"">")}
description.modify {cleanup}
description.modify {replace|\||\n\n}
**  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _
**      #####  CHANNEL FILE CREATION (only to create the xxx-channel.xml file)
**
** @auto_xml_channel_start
*index_site_id.scrub {multi|<option value=||>|</select>}
*index_site_id.modify {replace|""|#}
*index_site_id.modify {remove| selected}
*index_site_id.modify {replace|"|}
*index_site_channel.scrub {multi ()|<option value="|>|</option>|</select>}
** @auto_xml_channel_end
